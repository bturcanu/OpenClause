# ─── Database ───────────────────────────────────────────────────────
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=openclause
POSTGRES_PASSWORD=changeme
POSTGRES_DB=openclause

# ─── OPA ────────────────────────────────────────────────────────────
OPA_URL=http://localhost:8181

# ─── Services ───────────────────────────────────────────────────────
GATEWAY_ADDR=:8080
APPROVALS_ADDR=:8081
CONNECTOR_SLACK_ADDR=:8082
CONNECTOR_JIRA_ADDR=:8083

APPROVALS_URL=http://localhost:8081
CONNECTOR_SLACK_URL=http://localhost:8082
CONNECTOR_JIRA_URL=http://localhost:8083

# ─── Auth ───────────────────────────────────────────────────────────
# Comma-separated list of tenant_id:api_key pairs
API_KEYS=tenant1:sk-test-key-1,tenant2:sk-test-key-2

# ─── Connectors ─────────────────────────────────────────────────────
SLACK_BOT_TOKEN=xoxb-test-token
JIRA_BASE_URL=https://your-org.atlassian.net
JIRA_EMAIL=you@example.com
JIRA_API_TOKEN=your-jira-token

# ─── Internal Auth (shared secret for service-to-service calls) ────
# Leave empty to disable internal auth (dev only)
INTERNAL_AUTH_TOKEN=

# ─── Approver Auth (minimal RBAC allowlists) ────────────────────────
# Format: tenant_id:value1|value2,tenant2:value3
APPROVER_EMAIL_ALLOWLIST=
APPROVER_SLACK_ALLOWLIST=

# ─── Mock mode (set to "true" to use mock connectors) ──────────────
MOCK_CONNECTORS=true

# ─── Object Storage (MinIO / S3) ───────────────────────────────────
EVIDENCE_S3_ENDPOINT=localhost:9000
EVIDENCE_S3_BUCKET=openclause-evidence
EVIDENCE_S3_ACCESS_KEY=minioadmin
EVIDENCE_S3_SECRET_KEY=minioadmin
EVIDENCE_S3_SECURE=false

# ─── Notification Dispatcher (CloudEvents webhooks) ─────────────────
APPROVALS_NOTIFIER_ENABLED=true
APPROVALS_NOTIFIER_INTERVAL_SEC=5
APPROVALS_NOTIFIER_SOURCE=oc://approvals
# Format: secret_ref=secret_value,other_ref=other_secret
WEBHOOK_SECRET_REFS=tenant1_webhook=change-me

# ─── Slack Interactive Approvals ─────────────────────────────────────
SLACK_SIGNING_SECRET=

# ─── Observability ──────────────────────────────────────────────────
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=oc-gateway

# ─── Rate Limiting ──────────────────────────────────────────────────
RATE_LIMIT_PER_TENANT=100

# ─── Archiver ────────────────────────────────────────────────────────
ARCHIVER_RUN_ONCE=true
ARCHIVER_INTERVAL_SEC=300
ARCHIVER_TENANT_ID=
